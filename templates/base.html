{% load static %}

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}تمكن{% endblock %}</title>
    <style>
        /* ===== نظام تصميم تمكّن - Tamakon Design System ===== */
        :root {
          /* الألوان الأساسية */
          --primary: #0a6ed1;        /* أزرق داكن */
          --primary-light: #e5f0fa;  /* أزرق فاتح */
          --secondary: #00b39f;      /* أخضر فيروزي */
          --accent: #ff9e1b;         /* برتقالي ذهبي */
          
          /* ألوان محايدة */
          --neutral-900: #1a1a1a;    /* أسود نص */
          --neutral-800: #333333;    /* رمادي داكن */
          --neutral-700: #555555;    /* رمادي متوسط */
          --neutral-500: #888888;    /* رمادي */
          --neutral-300: #cccccc;    /* رمادي فاتح */
          --neutral-200: #e6e6e6;    /* رمادي أفتح */
          --neutral-100: #f5f5f5;    /* رمادي شبه أبيض */
          --neutral-50: #fafafa;     /* شبه أبيض */
          --white: #ffffff;          /* أبيض */
          
          /* ألوان الحالات */
          --success: #00875a;        /* أخضر */
          --success-light: #e3f5ec;  /* أخضر فاتح */
          --warning: #ff8800;        /* برتقالي */
          --warning-light: #fff8e6;  /* برتقالي فاتح */
          --error: #e02020;          /* أحمر */
          --error-light: #fdebeb;    /* أحمر فاتح */
          --info: #0a6ed1;           /* أزرق */
          --info-light: #e5f0fa;     /* أزرق فاتح */
          
          /* الأحجام */
          --size-xxs: 0.25rem;   /* 4px */
          --size-xs: 0.5rem;      /* 8px */
          --size-sm: 0.75rem;     /* 12px */
          --size-md: 1rem;        /* 16px */
          --size-lg: 1.25rem;     /* 20px */
          --size-xl: 1.5rem;      /* 24px */
          --size-2xl: 2rem;       /* 32px */
          --size-3xl: 2.5rem;     /* 40px */
          --size-4xl: 3rem;       /* 48px */
          
          /* الظلال */
          --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
          --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
          --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
          
          /* الانتقالات */
          --transition-fast: 150ms ease;
          --transition-normal: 250ms ease;
          --transition-slow: 350ms ease;
          
          /* نصف قطر الزوايا */
          --radius-sm: 4px;
          --radius-md: 8px;
          --radius-lg: 12px;
          --radius-xl: 16px;
          --radius-full: 9999px;
        }

        /* ===== إعادة ضبط عامة ===== */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        html {
          font-size: 16px;
          scroll-behavior: smooth;
        }

        body {
          font-family: 'Tajawal', 'Cairo', sans-serif;
          color: var(--neutral-900);
          line-height: 1.5;
          background-color: var(--white);
          direction: rtl;
        }

        img {
          max-width: 100%;
          height: auto;
        }

        a {
          color: var(--primary);
          text-decoration: none;
          transition: color var(--transition-fast);
        }

        a:hover {
          color: var(--secondary);
        }

        /* ===== الطباعة ===== */
        h1, h2, h3, h4, h5, h6 {
          font-family: 'IBM Plex Sans Arabic', 'Tajawal', sans-serif;
          font-weight: 700;
          line-height: 1.2;
          margin-bottom: var(--size-md);
          color: var(--neutral-900);
        }

        h1 {
          font-size: var(--size-3xl);
        }

        h2 {
          font-size: var(--size-2xl);
        }

        h3 {
          font-size: var(--size-xl);
        }

        h4 {
          font-size: var(--size-lg);
        }

        p {
          margin-bottom: var(--size-md);
        }

        /* ===== الحاويات ===== */
        .container {
          width: 100%;
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 var(--size-md);
        }

        .section {
          padding: var(--size-3xl) 0;
        }

        /* ===== الشبكة ===== */
        .row {
          display: flex;
          flex-wrap: wrap;
          margin: 0 calc(-1 * var(--size-md));
        }

        .col {
          flex: 1 0 0%;
          padding: 0 var(--size-md);
        }

        /* ===== الأزرار ===== */
        .btn {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          padding: var(--size-sm) var(--size-lg);
          border-radius: var(--radius-md);
          font-weight: 600;
          text-align: center;
          cursor: pointer;
          transition: all var(--transition-fast);
          border: none;
          font-family: 'Tajawal', 'Cairo', sans-serif;
          font-size: var(--size-md);
          line-height: 1.5;
          text-decoration: none;
        }

        .btn-primary {
          background-color: var(--primary);
          color: var(--white);
        }

        .btn-primary:hover {
          background-color: #0855a1;
          color: var(--white);
        }

        .btn-secondary {
          background-color: var(--secondary);
          color: var(--white);
        }

        .btn-secondary:hover {
          background-color: #00967f;
          color: var(--white);
        }

        .btn-accent {
          background-color: var(--accent);
          color: var(--white);
        }

        .btn-accent:hover {
          background-color: #e68a00;
          color: var(--white);
        }

        .btn-outline {
          background-color: transparent;
          border: 2px solid var(--primary);
          color: var(--primary);
        }

        .btn-outline:hover {
          background-color: var(--primary);
          color: var(--white);
        }

        .btn-ghost {
          background-color: transparent;
          color: var(--primary);
        }

        .btn-ghost:hover {
          background-color: var(--primary-light);
          color: var(--primary);
        }

        .btn-lg {
          padding: var(--size-md) var(--size-xl);
          font-size: var(--size-lg);
        }

        .btn-sm {
          padding: var(--size-xs) var(--size-md);
          font-size: var(--size-sm);
        }

        /* ===== البطاقات ===== */
        .card {
          background-color: var(--white);
          border-radius: var(--radius-lg);
          box-shadow: var(--shadow-md);
          overflow: hidden;
          transition: transform var(--transition-normal), box-shadow var(--transition-normal);
        }

        .card:hover {
          transform: translateY(-4px);
          box-shadow: var(--shadow-lg);
        }

        .card-img {
          width: 100%;
          aspect-ratio: 16/9;
          object-fit: cover;
        }

        .card-body {
          padding: var(--size-lg);
        }

        .card-title {
          font-size: var(--size-lg);
          margin-bottom: var(--size-xs);
        }

        .card-text {
          color: var(--neutral-700);
          margin-bottom: var(--size-md);
        }

        /* ===== الشارات ===== */
        .badge {
          display: inline-flex;
          align-items: center;
          padding: var(--size-xxs) var(--size-xs);
          border-radius: var(--radius-sm);
          font-size: var(--size-sm);
          font-weight: 600;
          line-height: 1;
          white-space: nowrap;
        }

        .badge-primary {
          background-color: var(--primary-light);
          color: var(--primary);
        }

        .badge-success {
          background-color: var(--success-light);
          color: var(--success);
        }

        .badge-warning {
          background-color: var(--warning-light);
          color: var(--warning);
        }

        .badge-info {
          background-color: var(--info-light);
          color: var(--info);
        }

        /* ===== الأكورديون ===== */
        .accordion {
          border: 1px solid var(--neutral-200);
          border-radius: var(--radius-md);
          overflow: hidden;
        }

        .accordion-item {
          border-bottom: 1px solid var(--neutral-200);
        }

        .accordion-item:last-child {
          border-bottom: none;
        }

        .accordion-header {
          padding: var(--size-md);
          background-color: var(--white);
          cursor: pointer;
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-weight: 600;
          transition: background-color var(--transition-fast);
        }

        .accordion-header:hover {
          background-color: var(--neutral-50);
        }

        .accordion-body {
          padding: var(--size-md);
          background-color: var(--neutral-50);
          display: none;
        }

        .accordion-item.active .accordion-body {
          display: block;
        }

        /* ===== التبويبات ===== */
        .tabs {
          display: flex;
          border-bottom: 2px solid var(--neutral-200);
          margin-bottom: var(--size-lg);
        }

        .tab {
          padding: var(--size-sm) var(--size-lg);
          cursor: pointer;
          font-weight: 600;
          color: var(--neutral-700);
          border-bottom: 2px solid transparent;
          margin-bottom: -2px;
          transition: all var(--transition-fast);
        }

        .tab:hover {
          color: var(--primary);
        }

        .tab.active {
          color: var(--primary);
          border-bottom-color: var(--primary);
        }

        .tab-content {
          display: none;
        }

        .tab-content.active {
          display: block;
        }

        /* ===== النماذج ===== */
        .form-group {
          margin-bottom: var(--size-lg);
        }

        .form-label {
          display: block;
          margin-bottom: var(--size-xs);
          font-weight: 600;
          color: var(--neutral-800);
        }

        .form-control {
          width: 100%;
          padding: var(--size-sm) var(--size-md);
          border: 1px solid var(--neutral-300);
          border-radius: var(--radius-md);
          font-family: 'Tajawal', 'Cairo', sans-serif;
          font-size: var(--size-md);
          transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }

        .form-control:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px var(--primary-light);
        }

        .form-control::placeholder {
          color: var(--neutral-500);
        }

        .form-text {
          margin-top: var(--size-xs);
          font-size: var(--size-sm);
          color: var(--neutral-700);
        }

        /* ===== الإشعارات ===== */
        .alert {
          padding: var(--size-md);
          border-radius: var(--radius-md);
          margin-bottom: var(--size-lg);
          border-right: 4px solid transparent;
        }

        .alert-success {
          background-color: var(--success-light);
          border-right-color: var(--success);
          color: var(--success);
        }

        .alert-warning {
          background-color: var(--warning-light);
          border-right-color: var(--warning);
          color: var(--warning);
        }

        .alert-error {
          background-color: var(--error-light);
          border-right-color: var(--error);
          color: var(--error);
        }

        .alert-info {
          background-color: var(--info-light);
          border-right-color: var(--info);
          color: var(--info);
        }

        /* ===== الهيدر والتنقل ===== */
        .header {
          background-color: var(--white);
          box-shadow: var(--shadow-sm);
          position: sticky;
          top: 0;
          z-index: 100;
          padding: var(--size-md) 0;
          transition: all var(--transition-fast);
        }

        .navbar {
          display: flex;
          align-items: center;
          justify-content: space-between;
        }

        .navbar-brand {
          display: flex;
          align-items: center;
        }

        .navbar-brand img {
          height: 40px;
          width: auto;
        }

        .navbar-nav {
          display: flex;
          align-items: center;
          gap: var(--size-lg);
          list-style: none;
        }

        .nav-link {
          color: var(--neutral-800);
          font-weight: 500;
          transition: color var(--transition-fast);
        }

        .nav-link:hover, .nav-link.active {
          color: var(--primary);
        }

        .navbar-actions {
          display: flex;
          align-items: center;
          gap: var(--size-md);
        }

        .navbar-toggler {
          display: none;
          background: none;
          border: none;
          cursor: pointer;
          font-size: var(--size-xl);
          color: var(--neutral-800);
        }

        /* ===== الفوتر ===== */
        .footer {
          background-color: var(--neutral-900);
          color: var(--neutral-300);
          padding: var(--size-3xl) 0 var(--size-xl);
        }

        .footer-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: var(--size-2xl);
          margin-bottom: var(--size-2xl);
        }

        .footer-title {
          color: var(--white);
          margin-bottom: var(--size-md);
          font-size: var(--size-lg);
        }

        .footer-links {
          list-style: none;
        }

        .footer-link {
          margin-bottom: var(--size-xs);
        }

        .footer-link a {
          color: var(--neutral-300);
          transition: color var(--transition-fast);
        }

        .footer-link a:hover {
          color: var(--white);
        }

        .footer-bottom {
          padding-top: var(--size-lg);
          border-top: 1px solid var(--neutral-800);
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: wrap;
          gap: var(--size-md);
        }

        .footer-copyright {
          font-size: var(--size-sm);
        }

        .social-links {
          display: flex;
          gap: var(--size-md);
        }

        .social-link {
          color: var(--neutral-300);
          font-size: var(--size-lg);
          transition: color var(--transition-fast);
        }

        .social-link:hover {
          color: var(--white);
        }

        /* ===== قسم Hero ===== */
        .hero {
          position: relative;
          padding: var(--size-4xl) 0;
          background-color: var(--primary-light);
          overflow: hidden;
        }

        .hero-bg {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          opacity: 0.1;
          z-index: 0;
        }

        .hero-content {
          position: relative;
          z-index: 1;
          max-width: 700px;
        }

        .hero-title {
          font-size: calc(var(--size-3xl) * 1.5);
          margin-bottom: var(--size-lg);
          line-height: 1.1;
        }

        .hero-subtitle {
          font-size: var(--size-xl);
          color: var(--neutral-700);
          margin-bottom: var(--size-2xl);
        }

        .hero-actions {
          display: flex;
          gap: var(--size-md);
          flex-wrap: wrap;
        }

        /* ===== قسم الميزات ===== */
        .features {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: var(--size-xl);
        }

        .feature {
          text-align: center;
          padding: var(--size-lg);
        }

        .feature-icon {
          font-size: var(--size-3xl);
          color: var(--primary);
          margin-bottom: var(--size-md);
        }

        .feature-title {
          margin-bottom: var(--size-sm);
        }

        .feature-text {
          color: var(--neutral-700);
        }

        /* ===== الحركات والتأثيرات ===== */
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
          animation: fadeIn 0.5s ease forwards;
        }

        .reveal {
          opacity: 0;
          transform: translateY(20px);
          transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .reveal.active {
          opacity: 1;
          transform: translateY(0);
        }

        /* ===== Toast Notifications ===== */
        #toast-container {
          position: fixed;
          top: 16px;
          left: 16px;
          z-index: 9999;
          display: flex;
          flex-direction: column;
          gap: 8px;
          pointer-events: none;
        }

        .toast {
          pointer-events: auto;
          min-width: 280px;
          max-width: 420px;
          padding: 12px 14px;
          border-radius: var(--radius-md);
          box-shadow: var(--shadow-md);
          display: flex;
          align-items: center;
          gap: 10px;
          animation: toast-in .18s ease-out;
          font-size: 14px;
          line-height: 1.5;
          direction: rtl;
        }

        .toast__body { flex: 1; }
        .toast__close {
          border: 0;
          background: transparent;
          font-size: 20px;
          line-height: 1;
          cursor: pointer;
          opacity: .7;
        }
        .toast__close:hover { opacity: 1; }

        .toast--success { background-color: var(--success-light); color: var(--success); border: 1px solid var(--success); }
        .toast--error { background-color: var(--error-light); color: var(--error); border: 1px solid var(--error); }
        .toast--warning { background-color: var(--warning-light); color: var(--warning); border: 1px solid var(--warning); }
        .toast--info { background-color: var(--info-light); color: var(--info); border: 1px solid var(--info); }

        .toast--hide { opacity: 0; transform: translateY(-6px); transition: opacity .18s, transform .18s; }

        @keyframes toast-in {
          from { opacity: 0; transform: translateY(-6px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* ===== التوافقية مع الأجهزة المحمولة ===== */
        @media (max-width: 992px) {
          .course-sections {
            grid-template-columns: 1fr;
          }
          
          .enroll-card {
            position: static;
            margin-bottom: var(--size-xl);
          }
        }

        @media (max-width: 768px) {
          .navbar-nav {
            display: none;
            flex-direction: column;
            position: absolute;
            top: 100%;
            right: 0;
            left: 0;
            background-color: #111827;
            box-shadow: var(--shadow-md);
            padding: var(--size-md);
            align-items: flex-start;
            z-index: 1000;
          }
          
          .navbar-nav.show {
            display: flex;
          }
          
          .navbar-nav .nav-link {
            color: #ffffff;
            font-weight: 600;
            padding: 10px 15px;
            width: 100%;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
          }
          
          .navbar-nav .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
          }
          
          .navbar-toggler {
            display: block;
          }
          
          .hero-title {
            font-size: var(--size-3xl);
          }
          
          .hero-subtitle {
            font-size: var(--size-lg);
          }
          
          .lesson-layout {
            flex-direction: column;
          }
          
          .lesson-sidebar {
            width: 100%;
            position: static;
            max-height: none;
            margin-bottom: var(--size-xl);
          }
        }

        @media (max-width: 576px) {
          .hero-actions {
            flex-direction: column;
            align-items: stretch;
          }
          
          .footer-bottom {
            flex-direction: column;
            text-align: center;
          }
          
          .social-links {
            justify-content: center;
          }
        }

        /* ===== القائمة المنسدلة ===== */
        .dropdown {
          position: relative;
          display: inline-block;
        }

        .dropdown-toggle {
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: var(--size-xs);
        }

        .dropdown-menu {
          position: absolute;
          top: 100%;
          left: 0;
          z-index: 1000;
          display: none;
          min-width: 200px;
          padding: var(--size-xs) 0;
          margin: var(--size-xs) 0 0;
          background-color: var(--info);
          border-radius: var(--radius-md);
          box-shadow: var(--shadow-md);
        }

        .dropdown:hover .dropdown-menu {
          display: block;
        }

        .dropdown-item {
          display: block;
          padding: var(--size-xs) var(--size-md);
          color: var(--neutral-800);
          transition: background-color var(--transition-fast);
        }

        .dropdown-item:hover {
          background-color: var(--neutral-100);
          color: var(--primary);
        }

        .dropdown-divider {
          height: 1px;
          margin: var(--size-xs) 0;
          background-color: var(--neutral-200);
        }

        /* ===== Dark Theme Utilities ===== */
        .header--solid-dark {
          background: #0f0f23;
          border-bottom: 1px solid rgba(255,255,255,.08);
        }

        .header--transparent-dark {
          background: transparent;
          border-bottom: none;
          position: fixed;
          top: 0;
          width: 100%;
        }

        .is-on-dark {
          color: rgba(255,255,255,0.9) !important;
        }

        .is-on-dark:hover {
          color: #ffd700 !important;
        }

        .btn-ghost.is-on-dark {
          color: rgba(255,255,255,0.9);
        }

        .btn-ghost.is-on-dark:hover {
          background-color: rgba(255,255,255,0.1);
          color: #ffd700;
        }

        /* Dark theme body modifier */
        body.theme-dark {
          color: #e2e8f0;
        }

        body.theme-dark a {
          color: #ffd700;
        }

        body.theme-dark a:hover {
          color: #ffed4e;
        }

        body.theme-dark h1,
        body.theme-dark h2,
        body.theme-dark h3,
        body.theme-dark h4,
        body.theme-dark h5,
        body.theme-dark h6 {
          color: #ffffff;
        }

        /* Logo enhancement for dark backgrounds */
        .navbar-brand img {
          height: 70px;
          width: auto;
          transition: all 0.3s ease;
        }

        .header--transparent-dark .navbar-brand img,
        .header--solid-dark .navbar-brand img {
          filter: brightness(0) invert(1);
        }

        /* Enhanced navbar for better inheritance */
        .header {
          transition: all 0.3s ease;
          backdrop-filter: blur(10px);
        }

        .header--transparent-dark {
          background: rgba(15, 15, 35, 0.1);
          border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .header--solid-dark {
          background: #0f0f23;
          border-bottom: 1px solid rgba(255,255,255,.08);
        }

        /* Navigation links enhancement for dark theme */
        .header--transparent-dark .nav-link,
        .header--solid-dark .nav-link {
          color: rgba(255,255,255,0.9) !important;
        }

        .header--transparent-dark .nav-link:hover,
        .header--solid-dark .nav-link:hover {
          color: #ffd700 !important;
        }

        .header--transparent-dark .btn-ghost,
        .header--solid-dark .btn-ghost {
          color: rgba(255,255,255,0.9);
          border-color: rgba(255,255,255,0.3);
        }

        .header--transparent-dark .btn-ghost:hover,
        .header--solid-dark .btn-ghost:hover {
          background-color: rgba(255,255,255,0.1);
          color: #ffd700;
          border-color: #ffd700;
        }

        .header--transparent-dark .btn-primary,
        .header--solid-dark .btn-primary {
          background: linear-gradient(45deg, #ffd700, #ffed4e);
          color: #1a1a2e;
          border: none;
        }

        /* Utility classes */
        .gradient-bg {
          background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
        }

        .text-gradient {
          background: linear-gradient(45deg, #ffd700, #ffed4e);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .p-6 {
          padding: 6rem;
        }

        .mb-4 {
          margin-bottom: 4rem;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&family=IBM+Plex+Sans+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
</head>
<body{% block body_class %}{% endblock %}>

    <!-- الهيدر والتنقل -->
    <header class="header{% block header_class %}{% endblock %}" id="main-header">
        <div class="container">
            <nav class="navbar">
                <a href="{% url 'learning:home' %}" class="navbar-brand">
                    <img src="{% static 'images/logo.png' %}" alt="تمكن">
                </a>
                
                <button class="navbar-toggler" id="navToggle">
                    <i class="fas fa-bars"></i>
                </button>
                
                <ul class="navbar-nav" id="navMenu">
                    <li><a href="{% url 'learning:home' %}" class="nav-link{% block nav_home_class %}{% endblock %}">الرئيسية</a></li>
                    <li><a href="{% url 'learning:course_list' %}" class="nav-link{% block nav_courses_class %}{% endblock %}">الدورات</a></li>
                    <li><a href="{% url 'learning:my_courses' %}" class="nav-link{% block nav_my_courses_class %}{% endblock %}">دوراتي</a></li>
                    <li><a href="{% url 'learning:faq' %}" class="nav-link{% block nav_faq_class %}{% endblock %}">الأسئلة الشائعة</a></li>
                    <li><a href="{% url 'learning:about_us' %}" class="nav-link{% block nav_about_class %}{% endblock %}">عن المنصة</a></li>
                    <li><a href="{% url 'learning:contact' %}" class="nav-link{% block nav_contact_class %}{% endblock %}">تواصل معنا</a></li>
                </ul>
                
                <div class="navbar-actions">
                    {% if user.is_authenticated %}
                        <div class="dropdown">
                            <button class="btn btn-ghost{% block user_btn_class %}{% endblock %} dropdown-toggle">
                                <i class="fas fa-user-circle"></i>
                                {{ user.get_full_name|default:user.username }}
                            </button>
                            <div class="dropdown-menu">
                                <a href="#" class="dropdown-item">الملف الشخصي</a>
                                {% if user.is_staff %}
                                <a href="{% url 'learning:bunny_uploader' %}" class="dropdown-item">رفع دروسك</a>
                                <a href="{% url 'marketing:bulk_email_compose' %}" class="dropdown-item">إرسال إيميل للزوار</a>
                                {% endif %}
                                <div class="dropdown-divider"></div>
                                <a href="{% url 'users:logout' %}" class="dropdown-item">تسجيل الخروج</a>
                            </div>
                        </div>
                    {% else %}
                        <a href="{% url 'users:login' %}" class="btn btn-ghost{% block login_btn_class %}{% endblock %}">تسجيل الدخول</a>
                        <a href="{% url 'users:register' %}" class="btn btn-primary{% block register_btn_class %}{% endblock %}">إنشاء حساب</a>
                    {% endif %}
                </div>
            </nav>
        </div>
    </header>
    
    {% include "partials/enrollment_banners.html" %}

    <!-- إشعارات Toast -->
    <div id="toast-container"></div>

    {% if messages %}
    <script>
    (function () {
        const container = document.getElementById('toast-container');
        const msgs = [
        {% for message in messages %}
            { text: "{{ message|escapejs }}", level: "{{ message.tags|default:'info' }}" }{% if not forloop.last %},{% endif %}
        {% endfor %}
        ];

        const levelClass = lvl => ({
        success: 'toast--success',
        error:   'toast--error',
        warning: 'toast--warning',
        info:    'toast--info'
        }[lvl] || 'toast--info');

        msgs.forEach(({text, level}) => {
        const t = document.createElement('div');
        t.className = `toast ${levelClass(level)}`;
        t.innerHTML = `
            <div class="toast__body">${text}</div>
            <button class="toast__close" aria-label="إغلاق">&times;</button>
        `;
        container.appendChild(t);

        t.querySelector('.toast__close').addEventListener('click', () => {
            t.classList.add('toast--hide');
            setTimeout(() => t.remove(), 200);
        });

        setTimeout(() => {
            if (!t.classList.contains('toast--hide')) {
            t.classList.add('toast--hide');
            setTimeout(() => t.remove(), 200);
            }
        }, 5000);
        });
    })();
    </script>
    {% endif %}

    <!-- محتوى الصفحة -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- الفوتر -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <h3 class="footer-title">تمكن</h3>
                    <p>منصة تعليمية متخصصة تقدم دورات عملية مجزأة بطريقة مبتكرة تسهل عملية التعلم وتضمن الفهم العميق للمحتوى.</p>
                    <div class="social-links" style="margin-top: var(--size-md);">
                        <a href="https://x.com/mohamed_fettouh?s=21" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="https://t.me/SOCPA_IFRS" class="social-link"><i class="fab fa-telegram"></i></a>
                        <a href="https://www.youtube.com/@tamakon" class="social-link"><i class="fab fa-youtube"></i></a>
                        <a href="https://www.tiktok.com/@mohamed..fettouh?_t=ZS-90i0FfG28xQ&_r=1" class="social-link"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
                
                <div>
                    <h3 class="footer-title">روابط سريعة</h3>
                    <ul class="footer-links">
                        <li class="footer-link"><a href="{% url 'learning:home' %}">الرئيسية</a></li>
                        <li class="footer-link"><a href="{% url 'learning:course_list' %}">الدورات</a></li>
                        <li class="footer-link"><a href="{% url 'learning:my_courses' %}">دوراتي</a></li>
                        <li class="footer-link"><a href="{% url 'learning:faq' %}">الأسئلة الشائعة</a></li>
                        <li class="footer-link"><a href="{% url 'learning:about_us' %}">عن المنصة</a></li>
                        <li class="footer-link"><a href="{% url 'learning:contact' %}">تواصل معنا</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="footer-title">تواصل معنا</h3>
                    <ul class="footer-links">
                        <li class="footer-link"><i class="fas fa-envelope"></i> customer-care@tamakon.online</li>
                        <li class="footer-link"><i class="fas fa-phone"></i> +201010298328</li>
                        <li class="footer-link"><i class="fas fa-map-marker-alt"></i> القاهرة - مصر</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-copyright">&copy; {{ now|date:"Y" }} تمكن - جميع الحقوق محفوظة</div>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Sticky Button -->
    <a href="https://wa.me/201010298328" class="whatsapp-sticky" target="_blank" rel="noopener noreferrer">
        <i class="fab fa-whatsapp"></i>
    </a>

    <style>
        .whatsapp-sticky {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #25D366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .whatsapp-sticky i {
            font-size: 32px;
        }
        
        .whatsapp-sticky:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
    </style>

    <!-- سكريبت التنقل المتجاوب -->
    <script>
        document.getElementById('navToggle').addEventListener('click', function() {
            document.getElementById('navMenu').classList.toggle('show');
        });
        
        // Scroll-triggered header transition for dark theme
        window.addEventListener('scroll', function() {
            const header = document.getElementById('main-header');
            if (header && header.classList.contains('header--transparent-dark')) {
                if (window.scrollY > 100) {
                    header.classList.remove('header--transparent-dark');
                    header.classList.add('header--solid-dark');
                } else {
                    header.classList.remove('header--solid-dark');
                    header.classList.add('header--transparent-dark');
                }
            }
        });
        
        // تفعيل الأكورديون
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const item = header.parentElement;
                item.classList.toggle('active');
            });
        });
        
        // تفعيل التبويبات
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const target = tab.getAttribute('data-target');
                
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(target).classList.add('active');
            });
        });
        
        // تفعيل الكشف عن العناصر عند التمرير
        const revealElements = document.querySelectorAll('.reveal');
        
        function checkReveal() {
            const windowHeight = window.innerHeight;
            const revealPoint = 150;
            
            revealElements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                
                if (elementTop < windowHeight - revealPoint) {
                    element.classList.add('active');
                }
            });
        }
        
        window.addEventListener('scroll', checkReveal);
        window.addEventListener('load', checkReveal);
    </script>

</body>
</html>
