{% extends "base.html" %}
{% block title %}Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯{% endblock %}

{% block body_class %} class="theme-dark"{% endblock %}
{% block header_class %} header--transparent-dark{% endblock %}

{% block content %}
<!-- Ù‡ÙŠØ±Ùˆ -->
<section class="hero-section" style="background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%); padding: 2.25rem 0; position: relative; overflow: hidden;">
  <div class="container" style="max-width: 1100px; margin: 0 auto; padding: 0 20px;">
    <div style="text-align:center">
      <div style="display:inline-block;background:rgba(255,215,0,.1);border:1px solid rgba(255,215,0,.3);border-radius:999px;padding:.4rem 1rem;margin-bottom:.75rem;">
        <span style="background:linear-gradient(45deg,#ffd700,#ffed4e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:700">Ù…Ø±ÙƒØ² Ø§Ù„Ø¨Ø±ÙŠØ¯</span>
      </div>
      <h1 style="font-size:2.2rem;font-weight:800;margin:0;background:linear-gradient(45deg,#ffd700,#ffed4e,#667eea);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 30px rgba(255,215,0,.25)">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯</h1>
    </div>
  </div>
</section>

<div class="container" style="max-width:1100px;margin:0 auto;padding:20px;">
  <!-- Ø¨Ø·Ø§Ù‚Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© -->
  <div class="card-like" style="background:#111827;border:1px solid #2a3346;border-radius:16px;padding:18px;margin-bottom:18px;box-shadow:0 4px 20px rgba(0,0,0,.25);color:#e5e7eb;">
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;align-items:center;">
      <div>
        <div style="font-size:.9rem;opacity:.85;margin-bottom:6px;">ðŸ“§ Ø¹ÙŠÙ†Ø© Ø¥Ù„Ù‰</div>
        <code style="direction:ltr;background:#0b1220;border:1px solid #233044;color:#10b981;padding:.45rem .6rem;border-radius:8px;display:inline-block">{{ sample_to }}</code>
      </div>
      <div>
        <div style="font-size:.9rem;opacity:.85;margin-bottom:6px;">ðŸ“Œ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</div>
        <div style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);padding:.55rem .8rem;border-radius:8px">{{ subject }}</div>
      </div>
    </div>
  </div>

  <!-- HTML Preview -->
  <fieldset class="card-like" style="background:#111827;border:1px solid #2a3346;border-radius:16px;padding:0;overflow:hidden;margin-bottom:18px;color:#e5e7eb;">
    <legend style="margin-inline-start:14px;padding:0 .5rem;background:linear-gradient(45deg,#ffd700,#ffed4e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:700">HTML</legend>
    <div class="preview-html" style="background:#0b1220;border-top:1px solid #233044;color:#e5e7eb;padding:16px;">
      {{ html_preview|safe }}
    </div>
  </fieldset>

  <!-- Plain Text Preview -->
  <fieldset class="card-like" style="background:#111827;border:1px solid #2a3346;border-radius:16px;padding:0;overflow:hidden;margin-bottom:22px;color:#e5e7eb;">
    <legend style="margin-inline-start:14px;padding:0 .5rem;background:linear-gradient(45deg,#ffd700,#ffed4e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:700">Plain Text</legend>
    <pre style="background:#0b1220;color:#e5e7eb;border-top:1px dashed #233044;padding:16px;white-space:pre-wrap;margin:0">{{ text_preview }}</pre>
  </fieldset>

  <!-- Ø£Ø²Ø±Ø§Ø± -->
  <div class="actions" style="display:flex;gap:12px;justify-content:center;">
    <button type="button" class="btn-ghost" onclick="history.back()" style="padding:.8rem 1.2rem;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.1);color:#e5e7eb;cursor:pointer">â†©ï¸Ž Ø±Ø¬ÙˆØ¹ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„</button>

    <form method="post" style="margin:0">
      {% csrf_token %}
      <input type="hidden" name="subject" value="{{ subject }}">
      <input type="hidden" name="body_html" value="{{ html_preview|escape }}">
      <input type="hidden" name="body_text" value="{{ text_preview|escape }}">
      {% for id in selected_ids %}
        <input type="hidden" name="selected" value="{{ id }}">
      {% endfor %}
      <button name="start" class="btn-send" style="padding:.85rem 1.4rem;border-radius:999px;border:none;background:linear-gradient(45deg,#ffd700,#ffed4e);color:#111827;font-weight:800;cursor:pointer;box-shadow:0 6px 24px rgba(255,215,0,.35)">ðŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</button>
    </form>
  </div>
</div>

<!-- ØªØ­ÙƒÙ‘Ù… Ø«ÙŠÙ… Ø¯Ø§ÙƒÙ† (Ù†ÙØ³ ÙÙƒØ±Ø© compose) -->
<style>
  /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø© Ø¯Ø§ÙƒÙ†Ø© ØµØ±ÙŠØ­Ø© */
  html, body, main { background:#0f0f23 !important; color:#e2e8f0; }
  section, .container { background: transparent !important; }

  /* ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
  .preview-html a { color:#60a5fa; text-decoration:underline; }
  .preview-html h1, .preview-html h2, .preview-html h3 { color:#e5e7eb; }

  /* ØªØµØºÙŠØ± Ø­Ø¯ÙˆØ¯ Ø§Ù„ØµÙˆØ± Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù„Ùˆ ÙÙŠÙ‡ */
  .preview-html img { max-width:100%; height:auto; border-radius:8px; }

  /* Ø£Ø²Ø±Ø§Ø± hover */
  .btn-ghost:hover { background:rgba(255,255,255,.14) !important; }
  .btn-send:hover { transform: translateY(-1px); box-shadow:0 10px 28px rgba(255,215,0,.42); }

  /* Ù…ÙˆØ¨Ø§ÙŠÙ„ */
  @media (max-width: 640px){
    .actions { flex-direction:column; }
    .actions > * { width:100%; }
  }
</style>
{% endblock %}
