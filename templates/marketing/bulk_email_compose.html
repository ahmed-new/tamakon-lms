{% extends "base.html" %}
{% block title %}Ø­Ù…Ù„Ø© Ø¨Ø±ÙŠØ¯ÙŠØ© â€” Ø§Ù„Ø²ÙˆØ§Ø±{% endblock %}

{% block body_class %} class="theme-dark"{% endblock %}
{% block header_class %} header--transparent-dark{% endblock %}

{% block content %}
<!-- Ù‚Ø³Ù… Ù‡ÙŠØ±Ùˆ Ù„ØµÙØ­Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ -->
<section class="hero-section">
  <div class="container">
    <div class="hero-content">
      <!-- Ø´Ø¹Ø§Ø± Ù…ØªØ­Ø±Ùƒ -->
      <div class="hero-badge">
        <span>Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span>
      </div>
      
      <h1 class="page-title">âœ‰ï¸ Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ù„Ù„Ø²ÙˆÙ‘Ø§Ø±</h1>
    </div>
  </div>
</section>

<div class="container">
  <form method="post">
    {% csrf_token %}

    <fieldset class="email-fieldset target-fieldset">
      <legend>ğŸ¯ Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙÙŠÙ†</legend>
      <table class="email-table">
        <thead>
          <tr>
            <th>
              <input type="checkbox" id="check-all" onclick="toggleAll(this)">
            </th>
            <th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th>
            <th>Ø§Ù„Ø§Ø³Ù…</th>
            <th>Ø§Ù„Ù…ØµØ¯Ø±</th>
            <th>Ø£ÙØ¶ÙŠÙ</th>
            <th>Ø¢Ø®Ø± Ø¸Ù‡ÙˆØ±</th>
          </tr>
        </thead>
        <tbody>
        {% for v in visitors %}
          <tr>
            <td><input type="checkbox" name="selected" value="{{ v.id }}"></td>
            <td>{{ v.email }}</td>
            <td>{{ v.name|default:"â€”" }}</td>
            <td>{{ v.source|default:"â€”" }}</td>
            <td>{{ v.created_at|date:"Y-m-d H:i" }}</td>
            <td>{{ v.last_seen_at|date:"Y-m-d H:i"|default:"â€”" }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="6" class="no-data">ğŸš« Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø²ÙˆÙ‘Ø§Ø± Ø¨Ø¹Ø¯.</td></tr>
        {% endfor %}
        </tbody>
      </table>
    </fieldset>

    <fieldset class="email-fieldset content-fieldset">
      <legend>ğŸ“ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</legend>
      {{ form.media }}
      {{ form.as_p }}

      {% verbatim %}
      <div class="instructions">
        <strong>â„¹ï¸ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©:</strong>
        <ul>
          <li><code>{{ name }}</code> â ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ø§Ø³Ù… Ø§Ù„Ø²Ø§Ø¦Ø± (Ø£Ùˆ "ØµØ¯ÙŠÙ‚Ù†Ø§" Ù„Ùˆ Ø§Ù„Ø§Ø³Ù… ØºÙŠØ± Ù…ØªÙˆÙØ±).</li>
          <li><code>{{ email }}</code> â ÙŠØ¸Ù‡Ø± Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø²Ø§Ø¦Ø±.</li>
          <li><code>{{ site_name }}</code> â Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØµØ©.</li>
          <li><code>{{ unsubscribe_url }}</code> â Ø±Ø§Ø¨Ø· Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (ÙŠÙÙ†ØµØ­ ÙˆØ¶Ø¹Ù‡ ÙÙŠ Ø£Ø³ÙÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©).</li>
        </ul>
        <p class="example">
          Ù…Ø«Ø§Ù„: <em>Ù…Ø±Ø­Ø¨Ù‹Ø§ {{ name }}ØŒ ÙŠØ³Ø¹Ø¯Ù†Ø§ Ø§Ù†Ø¶Ù…Ø§Ù…Ùƒ Ø¥Ù„ÙŠÙ†Ø§ ÙÙŠ {{ site_name }}.</em>
        </p>
      </div>
      {% endverbatim %}
    </fieldset>

    <div class="action-buttons">
      <button name="preview" class="btn btn-preview">ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
      <button name="start" class="btn btn-send">ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (Ø¨Ø§Ù„Ø¯ÙØ¹Ø§Øª)</button>
    </div>
  </form>
</div>

<script>
function toggleAll(source) {
  const checkboxes = document.querySelectorAll('input[name="selected"]');
  for (const cb of checkboxes) {
    cb.checked = source.checked;
  }
}
</script>

<style>
/* ====== ØµÙØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ â€“ Ø«ÙŠÙ… Ø¯Ø§ÙƒÙ† ÙƒØ§Ù…Ù„ ====== */

/* Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø© ÙˆØ«Ø¨Ø§ØªÙ‡Ø§ */
body.theme-dark,
body.theme-dark main,
body.theme-dark .site-wrapper,
body.theme-dark .page-content,
body.theme-dark .content-wrapper {
  background:#0f0f23 !important;
  color:#e2e8f0;
}

/* Ù‡ÙŠØ±Ùˆ */
body.theme-dark .hero-section{
  position:relative;overflow:hidden;padding:2rem 0;
  background:linear-gradient(135deg,#0f0f23 0%,#1a1a2e 50%,#16213e 100%);
}
body.theme-dark .container, 
body.theme-dark section{ background:transparent !important; }

body.theme-dark .hero-content{max-width:900px;margin:0 auto;padding:1rem 0;text-align:center}
body.theme-dark .hero-badge{
  display:inline-block;background:rgba(255,215,0,.1);
  border:1px solid rgba(255,215,0,.3);border-radius:999px;
  padding:.5rem 1.5rem;margin-bottom:1rem;animation:pulse 2s infinite ease-in-out
}
body.theme-dark .hero-badge span{
  background:linear-gradient(45deg,#ffd700,#ffed4e);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:600
}
body.theme-dark .page-title{
  font-size:2.2rem;font-weight:800;margin-bottom:1.5rem;
  background:linear-gradient(45deg,#ffd700,#ffed4e,#667eea);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  animation:glow 2s ease-in-out infinite alternate
}

/* Ø¨Ø·Ø§Ù‚Ø§Øª/Ø³ÙƒØ§Ø´Ù† Ø§Ù„ØµÙØ­Ø© */
body.theme-dark .email-fieldset{
  border:1px solid rgba(255,255,255,.08);
  background:rgba(15,15,35,.55);
  padding:20px;border-radius:14px;margin-bottom:20px;backdrop-filter:blur(10px)
}
body.theme-dark .email-fieldset legend{
  background:linear-gradient(45deg,#ffd700,#ffed4e);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:700
}

/* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²ÙˆÙ‘Ø§Ø± */
body.theme-dark .email-table{width:100%;border-collapse:separate;border-spacing:0;margin-top:12px;color:#e5e7eb}
body.theme-dark .email-table thead tr{background:rgba(255,255,255,.06)}
body.theme-dark .email-table th{padding:12px 10px;text-align:right;font-weight:700;border-bottom:1px solid rgba(255,255,255,.08)}
body.theme-dark .email-table td{padding:12px 10px;border-bottom:1px solid rgba(255,255,255,.05)}
body.theme-dark .email-table tbody tr:hover{background:rgba(255,255,255,.04)}
body.theme-dark .no-data{text-align:center;padding:18px;color:#cbd5e1}

/* Inputs / selects */
body.theme-dark textarea,
body.theme-dark input[type="text"],
body.theme-dark input[type="email"],
body.theme-dark select{
  background:rgba(15,15,35,.7);
  border:1px solid rgba(255,255,255,.12);
  color:#e2e8f0;padding:10px;border-radius:10px
}
body.theme-dark textarea:focus,
body.theme-dark input:focus,
body.theme-dark select:focus{
  outline:none;border-color:rgba(255,215,0,.55);
  box-shadow:0 0 0 2px rgba(255,215,0,.22)
}
body.theme-dark input[type="checkbox"]{width:18px;height:18px;accent-color:#ffd700}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£ÙƒØ´Ù† */
body.theme-dark .action-buttons{margin-top:20px;display:flex;gap:14px;justify-content:center}
body.theme-dark .btn{padding:10px 20px;border-radius:10px;font-weight:700;cursor:pointer;transition:.25s;display:inline-flex;align-items:center;gap:8px}
body.theme-dark .btn-preview{background:rgba(255,255,255,.10);color:#e2e8f0;border:1px solid rgba(255,255,255,.2)}
body.theme-dark .btn-preview:hover{background:rgba(255,255,255,.16)}
body.theme-dark .btn-send{background:linear-gradient(45deg,#ffd700,#ffed4e);color:#181a27;border:none;box-shadow:0 4px 18px rgba(255,215,0,.28)}
body.theme-dark .btn-send:hover{transform:translateY(-2px);box-shadow:0 8px 26px rgba(255,215,0,.36)}

/* ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù…ØªØºÙŠÙ‘Ø±Ø§Øª */
body.theme-dark .instructions{
  margin-top:18px;padding:14px;background:rgba(20,20,40,.45);
  border:1px dashed rgba(255,215,0,.35);border-radius:12px;font-size:14px;line-height:1.65;color:#cbd5e1
}
body.theme-dark .instructions code{background:rgba(0,0,0,.25);color:#10b981;padding:2px 6px;border-radius:4px}

/* Ù…Ù†Ø¹ Ø£ÙŠ Ø®Ù„ÙÙŠØ§Øª ÙØ§ØªØ­Ø© Ø¬Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù€base */
body.theme-dark .card,
body.theme-dark .alert,
body.theme-dark .section,
body.theme-dark .container > .card,
body.theme-dark form > .card {
  background:rgba(15,15,35,.55) !important;
  color:#e2e8f0 !important;
  border-color:rgba(255,255,255,.08) !important;
}
body.theme-dark .card::before,
body.theme-dark .card::after,
body.theme-dark .alert::before,
body.theme-dark .alert::after{display:none !important}

/* TinyMCE (Ø§Ù„Ø­Ø§ÙˆÙŠØ© ÙÙ‚Ø· â€“ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø·Ø§Ø± ÙŠØ­ØªØ§Ø¬ content_css Ù…Ù† init) */
body.theme-dark .tox:not(.tox-tinymce-inline) .tox-editor-header,
body.theme-dark .tox .tox-toolbar,
body.theme-dark .tox .tox-toolbar__primary{background:#1a1a2e !important;border-color:rgba(255,255,255,.10) !important}
body.theme-dark .tox .tox-tbtn{color:#e2e8f0 !important}
body.theme-dark .tox .tox-tbtn:hover{background:rgba(255,255,255,.10) !important}
body.theme-dark .tox .tox-edit-area__iframe{background:#0f0f23 !important}
body.theme-dark .tox .tox-tinymce{border:1px solid rgba(255,255,255,.1) !important;border-radius:10px !important;overflow:hidden}

/* Ø­Ø±ÙƒØ§Øª Ø®ÙÙŠÙØ© */
@keyframes pulse{0%{opacity:.65}50%{opacity:1}100%{opacity:.65}}
@keyframes glow{0%{text-shadow:0 0 10px rgba(255,215,0,.2)}100%{text-shadow:0 0 30px rgba(255,215,0,.5),0 0 50px rgba(255,215,0,.28)}}
</style>

{% endblock %}
